(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{19:function(e,t,a){e.exports=a(35)},24:function(e,t,a){},25:function(e,t,a){},28:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(7),r=a.n(s),o=(a(24),a(2)),l=a(3),c=a(5),p=a(4),m=a(14),u=a.n(m),h=(a(25),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"login-bg"},i.a.createElement("div",{className:"login"},i.a.createElement("h1",null,"Spotify Wrapped++"),i.a.createElement("p",null,"Want to view your top tracks and artists but don't want to wait until December for Spotify Wrapped? Now you can with Spotify Wrapped++!"),i.a.createElement("a",{href:"https://peaceful-fortress-73033.herokuapp.com/login"},i.a.createElement("button",{className:"spotify-btn"},"Log in with Spotify"))))}}]),a}(i.a.Component)),f=a(8),g=a.n(f),d=a(11),y=a(15),b=a(9),E=(a(27),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"createSelectItems",value:function(){for(var e=[],t=50;t>=10;t--)e.push(i.a.createElement("option",{key:t,value:t},t));return e}},{key:"render",value:function(){return i.a.createElement("form",{className:"modal-body",onSubmit:this.props.createPlaylist},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"playlistName"},"Playlist Name"),i.a.createElement("input",{type:"text",className:"form-control",id:"playlistName",placeholder:this.props.title,value:this.props.playlistName,onChange:this.props.onChange,required:!0})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"playlistDescription"},"Playlist Description"),i.a.createElement("textarea",{className:"form-control",id:"playlistDescription",value:this.props.playlistDescription,onChange:this.props.onChange})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"exampleFormControlSelect2"},"Playlist Size"),i.a.createElement("select",{className:"form-control",id:"exampleFormControlSelect2",value:this.props.playlistSize,size:this.props.dropdownSize,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onChange:this.props.sizeChange},this.createSelectItems())),i.a.createElement("div",{id:"submit"},i.a.createElement("button",{type:"submit",id:"submit-btn",className:"spotify-btn"},"Create Playlist")))}}]),a}(i.a.Component)),v=(a(28),"A playlist of my top tracks created by Spotify Rewind++"),S=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).createPlaylist=function(){var e=Object(d.a)(g.a.mark((function e(t){var a,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById("submit-btn").innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Loading...',t.preventDefault(),a=null,i=null,e.next=6,n.props.spotifyApi.getMe().then((function(e){a=e.id}));case 6:return e.next=8,n.props.spotifyApi.createPlaylist(a,{name:n.state.playlistName,description:n.state.playlistDescription}).then((function(e){i=e.id}));case 8:return e.next=10,n.props.spotifyApi.getMyTopTracks({time_range:n.props.timeRange,limit:n.state.playlistSize}).then((function(e){return e.items.map((function(e){return e.uri}))})).then((function(e){n.props.spotifyApi.addTracksToPlaylist(i,e).then((function(){n.props.spotifyApi.getPlaylist(i).then((function(e){n.setState({justCreated:!0}),document.getElementsByClassName("modal-content")[0].firstElementChild.firstElementChild.textContent="Playlist Created!",document.getElementById("new-playlist-image").src=e.images[0].url,document.getElementById("open-playlist").href=e.external_urls.spotify}))}))}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.resetForm=function(){document.getElementById("modal-title").textContent="Playlist Details",n.setState({playlistName:"",playlistDescription:v,playlistSize:"50",justCreated:!1,modalShow:!1})},n.onChange=function(e){return n.setState(Object(y.a)({},e.target.id,e.target.value))},n.onFocus=function(){n.setState({dropdownSize:10})},n.onBlur=function(){n.setState({dropdownSize:1})},n.sizeChange=function(e){e.target.blur(),n.setState({playlistSize:e.target.value})},n.state={dropdownSize:1,playlistSize:"50",playlistName:"",playlistDescription:v,justCreated:!1,modalShow:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{type:"button",className:"spotify-btn control grid-2-2",onClick:function(){return e.setState({modalShow:!0})},disabled:this.props.itemType},"Create Playlist"),i.a.createElement(b.a,{show:this.state.modalShow,onHide:this.resetForm},i.a.createElement(b.a.Header,{className:"modal-header text-center"},i.a.createElement("h5",{id:"modal-title"},"Playlist Details"),i.a.createElement("button",{type:"button",className:"close",onClick:this.resetForm},i.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),!this.state.justCreated&&i.a.createElement(b.a.Body,{className:"modal-content"},i.a.createElement(E,{title:this.props.title,dropdownSize:this.state.dropdownSize,playlistSize:this.state.playlistSize,playlistName:this.state.playlistName,playlistDescription:this.state.playlistDescription,createPlaylist:this.createPlaylist,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,sizeChange:this.sizeChange})),this.state.justCreated&&i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a.Body,{className:"modal-content"},i.a.createElement("h2",{className:"text-center mt-3"},this.state.playlistName),i.a.createElement("img",{id:"new-playlist-image",alt:"".concat(this.state.playlistName," Cover")})),i.a.createElement(b.a.Footer,null,i.a.createElement("a",{href:"/#",id:"open-playlist",target:"_blank",rel:"noopener noreferrer"},i.a.createElement("button",{className:"spotify-btn"},"Open Playlist")),i.a.createElement("button",{onClick:this.resetForm,type:"button",className:"spotify-btn-2"},"Close")))))}}]),a}(i.a.Component),k=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"btn-group control grid-1-2","data-toggle":"buttons"},i.a.createElement("button",{className:"btn list-sizing active",onClick:this.props.changeListSize,value:"large",id:"ls-1"},i.a.createElement("input",{type:"radio",name:"options",defaultChecked:!0})),i.a.createElement("button",{className:"btn list-sizing",onClick:this.props.changeListSize,value:"medium",id:"ls-2"},i.a.createElement("input",{type:"radio",name:"options"})),i.a.createElement("button",{className:"btn list-sizing",onClick:this.props.changeListSize,value:"small",id:"ls-3"},i.a.createElement("input",{type:"radio",name:"options"})))}}]),a}(i.a.Component),N=(a(31),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"controls"},i.a.createElement("div",{className:"toggle control grid-1-1"},i.a.createElement("p",{className:"toggle-label"},"Tracks"),i.a.createElement("input",{type:"checkbox",onChange:this.props.toggleItems}),i.a.createElement("p",{className:"toggle-label"},"Artists")),i.a.createElement("select",{className:"spotify-btn-2 control grid-2-1",value:this.props.timeRange,onChange:this.props.changeTimeRange},i.a.createElement("option",{value:"short_term"},"4 Weeks"),i.a.createElement("option",{value:"medium_term"},"6 Months"),i.a.createElement("option",{value:"long_term"},"All Time")),i.a.createElement(S,{itemType:this.props.itemType,timeRange:this.props.timeRange,spotifyApi:this.props.spotifyApi,title:"My ".concat(this.props.title[0].substring(5)," - ").concat(this.props.title[1])}),i.a.createElement(k,{changeListSize:this.props.changeListSize}))}}]),a}(i.a.Component)),C=a(17),z=a(18),w=(a(32),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).getGenres=function(){var t=Object(z.a)(e.props.itemInfo.genres),a="";if(t.length>0){a+=t[0].replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}));var n,i=Object(C.a)(t.slice(1));try{for(i.s();!(n=i.n()).done;){var s=n.value;a+=", ".concat(s.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})))}}catch(r){i.e(r)}finally{i.f()}}return a},e}return Object(l.a)(a,[{key:"render",value:function(){return this.props.itemType?i.a.createElement("div",{className:"list-group-item ".concat(this.props.listSize)},i.a.createElement("p",{className:"rank ".concat(this.props.listSize)},this.props.itemInfo.rank,"."),i.a.createElement("div",{className:"info-container large"},i.a.createElement("a",{href:this.props.itemInfo.link,target:"_blank",className:"link ".concat(this.props.listSize),rel:"noopener noreferrer"},this.props.itemInfo.name),i.a.createElement("br",null),i.a.createElement("p",{className:"info ".concat(this.props.listSize," genres")},this.getGenres())),i.a.createElement("img",{src:this.props.itemInfo.image,className:"list-image ".concat(this.props.listSize),alt:this.props.itemInfo.name})):i.a.createElement("div",{className:"list-group-item ".concat(this.props.listSize)},i.a.createElement("p",{className:"rank ".concat(this.props.listSize)},this.props.itemInfo.rank,"."),i.a.createElement("div",{className:"info-container large"},i.a.createElement("a",{href:this.props.itemInfo.link,target:"_blank",className:"link ".concat(this.props.listSize),rel:"noopener noreferrer"},this.props.itemInfo.name),i.a.createElement("br",null),i.a.createElement("a",{href:this.props.itemInfo.artistLink,target:"_blank",className:"info ".concat(this.props.listSize),rel:"noopener noreferrer"},this.props.itemInfo.artist)),i.a.createElement("a",{href:this.props.itemInfo.albumLink,target:"_blank",rel:"noopener noreferrer"},i.a.createElement("img",{src:this.props.itemInfo.artwork,className:"list-image ".concat(this.props.listSize),alt:this.props.itemInfo.album})))}}]),a}(i.a.Component)),j=(a(33),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getHeader=function(){var e="Your Top ";switch(e+=n.state.itemType?"Artists":"Tracks",n.state.timeRange){case"short_term":return[e,"Last 4 Weeks"];case"medium_term":return[e,"Last 6 Months"];case"long_term":return[e,"All Time"];default:return"error"}},n.getTracks=function(){return n.props.spotifyApi.getMyTopTracks({time_range:n.state.timeRange,limit:"50"}).then((function(e){var t=[];return e.items.forEach((function(e,a){var n={name:e.name,artist:e.artists[0].name,artistLink:e.artists[0].external_urls.spotify,artwork:e.album.images[0].url,album:e.album.name,albumLink:e.album.external_urls.spotify,link:e.external_urls.spotify,rank:a+1};t.push(n)})),t}))},n.getArtists=function(){return n.props.spotifyApi.getMyTopArtists({time_range:n.state.timeRange,limit:"50"}).then((function(e){var t=[];return e.items.forEach((function(e,a){var n={name:e.name,image:e.images[0].url,link:e.external_urls.spotify,genres:e.genres.slice(0,3),rank:a+1};t.push(n)})),t}))},n.toggleItems=function(){var e=!n.state.itemType;e?n.getArtists().then((function(t){n.setState({itemType:e,items:t})})):n.getTracks().then((function(t){n.setState({itemType:e,items:t})}))},n.changeTimeRange=function(){var e=Object(d.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({timeRange:t.target.value});case 2:n.state.itemType?n.getArtists().then((function(e){n.setState({items:e})})):n.getTracks().then((function(e){n.setState({items:e})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.changeListSize=function(e){var t=e.target.value;Array.from(document.getElementsByClassName(n.state.listSize)).forEach((function(e){e.classList.replace(n.state.listSize,t)})),n.setState({listSize:t})},n.state={itemType:!1,items:[],timeRange:"short_term",listSize:"large"},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getTracks().then((function(t){return e.setState({items:t})}))}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("header",null,i.a.createElement("h1",null,this.getHeader()[0]),i.a.createElement("h2",null,this.getHeader()[1])),i.a.createElement(N,{itemType:this.state.itemType,timeRange:this.state.timeRange,listSize:this.state.listSize,toggleItems:this.toggleItems,changeTimeRange:this.changeTimeRange,changeListSize:this.changeListSize,spotifyApi:this.props.spotifyApi,title:this.getHeader()}),i.a.createElement("div",{className:"body"},i.a.createElement("div",{className:"container pb-5 list-group"},this.state.items.map((function(t,a){return i.a.createElement(w,{itemType:e.state.itemType,listSize:e.state.listSize,itemInfo:t,key:a})})))))}}]),a}(i.a.Component)),O=(a(34),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);var n=(e=t.call(this)).getHashParams().access_token;return e.state={loggedIn:!!n,spotifyApi:new u.a},n&&e.state.spotifyApi.setAccessToken(n),e}return Object(l.a)(a,[{key:"getHashParams",value:function(){for(var e,t={},a=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);e=a.exec(n);)t[e[1]]=decodeURIComponent(e[2]);return t}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},!this.state.loggedIn&&i.a.createElement(h,null),this.state.loggedIn&&i.a.createElement(j,{spotifyApi:this.state.spotifyApi}))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.63ecb8f0.chunk.js.map