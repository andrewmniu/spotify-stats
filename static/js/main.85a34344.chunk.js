(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{39:function(e,t,a){e.exports=a(55)},44:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(16),i=a.n(s),l=(a(44),a(5)),o=a(6),c=a(8),p=a(7),m=a(34),u=a.n(m),h=(a(45),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-bg"},r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"Spotify Wrapped++"),r.a.createElement("p",null,"Want to view your top tracks and artists but don't want to wait until December for Spotify Wrapped? Now you can with Spotify Wrapped++!"),r.a.createElement("a",{href:"https://peaceful-fortress-73033.herokuapp.com/login"},r.a.createElement("button",{className:"spotify-btn"},"Log in with Spotify"))))}}]),a}(r.a.Component)),f=a(35),g=a(38),y=a(17),d=a.n(y),E=a(25),b=a(36),v=a(20),S=(a(33),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"createSelectItems",value:function(){for(var e=[],t="Top Tracks"===this.props.playlistType?50:100;t>=10;t--)e.push(r.a.createElement("option",{key:t,value:t},t));return e}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"modal-body",onSubmit:this.props.createPlaylist},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleFormControlSelect"},"Playlist Type"),r.a.createElement("select",{className:"form-control",id:"exampleFormControlSelect",value:this.props.playlistType,onChange:function(t){return e.props.getDefaultValues(t.target.value)}},r.a.createElement("option",null,"Top Tracks"),r.a.createElement("option",null,"Personalized Recommendations"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"playlistName"},"Playlist Name"),r.a.createElement("input",{type:"text",className:"form-control",id:"playlistName",value:this.props.playlistName,onChange:this.props.onChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"playlistDescription"},"Playlist Description"),r.a.createElement("textarea",{className:"form-control",id:"playlistDescription",value:this.props.playlistDescription,onChange:this.props.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleFormControlSelect2"},"Playlist Size"),r.a.createElement("select",{className:"form-control",id:"exampleFormControlSelect2",value:this.props.playlistSize,size:this.props.dropdownSize,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onChange:this.props.sizeChange},this.createSelectItems())),r.a.createElement("div",{id:"submit"},r.a.createElement("button",{type:"submit",id:"submit-btn",className:"spotify-btn"},"Create Playlist")))}}]),a}(r.a.Component));a(47);var k=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).createSimilarPlaylist=function(e){var t=function(e){var t=e.length>5?5:e.length,a=new Array(t),n=e.length,r=new Array(n);if(t>n)throw new RangeError("getRandom: more elements taken than available");for(;t--;){var s=Math.floor(Math.random()*n);a[t]=e[s in r?r[s]:s],r[s]=--n in r?r[n]:n}return a}(e.items.map((function(e){return e.id})));return n.props.spotifyApi.getRecommendations({limit:n.state.playlistSize,seed_tracks:t}).then((function(e){return e.tracks.map((function(e){return e.uri}))}))},n.createPlaylist=function(){var e=Object(E.a)(d.a.mark((function e(t){var a,r,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="Top Tracks"===n.state.playlistType,r=a?n.state.playlistSize:25,document.getElementById("submit-btn").innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Loading...',t.preventDefault(),s=null,i=null,e.next=8,n.props.spotifyApi.getMe().then((function(e){s=e.id}));case 8:return e.next=10,n.props.spotifyApi.createPlaylist(s,{name:n.state.playlistName,description:n.state.playlistDescription}).then((function(e){i=e.id}));case 10:return e.next=12,n.props.spotifyApi.getMyTopTracks({time_range:n.props.timeRange,limit:r}).then((function(e){return a?e.items.map((function(e){return e.uri})):n.createSimilarPlaylist(e)})).then((function(e){n.props.spotifyApi.addTracksToPlaylist(i,e).then((function(){n.props.spotifyApi.getPlaylist(i).then((function(e){n.setState({justCreated:!0}),document.getElementsByClassName("modal-content")[0].firstElementChild.firstElementChild.textContent="Playlist Created!",document.getElementById("new-playlist-image").src=e.images[0].url,document.getElementById("open-playlist").href=e.external_urls.spotify}))}))}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.resetForm=function(){document.getElementById("modal-title").textContent="Playlist Details",n.getDefaultValues("Top Tracks"),n.setState({playlistType:"Top Tracks",playlistSize:"50",justCreated:!1,modalShow:!1})},n.getDefaultValues=function(e){var t="My "+e+" - "+n.props.title[1],a="A playlist of my ".concat(e.toLowerCase()," (").concat(n.props.title[1].toLowerCase(),") created by Spotify Rewind++");n.setState({playlistType:e,playlistName:t,playlistDescription:a})},n.onChange=function(e){return n.setState(Object(b.a)({},e.target.id,e.target.value))},n.onFocus=function(){n.setState({dropdownSize:10})},n.onBlur=function(){n.setState({dropdownSize:1})},n.sizeChange=function(e){e.target.blur(),n.setState({playlistSize:e.target.value})},n.state={dropdownSize:1,playlistType:"Top Tracks",playlistName:"",playlistDescription:"",playlistSize:"50",justCreated:!1,modalShow:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getDefaultValues(this.state.playlistType)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",className:"spotify-btn control grid-2-2",onClick:function(){e.getDefaultValues(e.state.playlistType),e.setState({modalShow:!0})},disabled:this.props.itemType},"Create Playlist"),r.a.createElement(v.a,{show:this.state.modalShow,onHide:this.resetForm},r.a.createElement(v.a.Header,{className:"modal-header text-center"},r.a.createElement("h5",{id:"modal-title"},"Playlist Details"),r.a.createElement("button",{type:"button",className:"close",onClick:this.resetForm},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),!this.state.justCreated&&r.a.createElement(v.a.Body,{className:"modal-content"},r.a.createElement(S,{dropdownSize:this.state.dropdownSize,playlistSize:this.state.playlistSize,playlistType:this.state.playlistType,playlistName:this.state.playlistName,playlistDescription:this.state.playlistDescription,createPlaylist:this.createPlaylist,getDefaultValues:this.getDefaultValues,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,sizeChange:this.sizeChange})),this.state.justCreated&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a.Body,{className:"modal-content"},r.a.createElement("h2",{className:"text-center mt-3"},this.state.playlistName),r.a.createElement("img",{id:"new-playlist-image",alt:"".concat(this.state.playlistName," Cover")})),r.a.createElement(v.a.Footer,null,r.a.createElement("a",{href:"/#",id:"open-playlist",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("button",{className:"spotify-btn"},"Open Playlist")),r.a.createElement("button",{onClick:this.resetForm,type:"button",className:"spotify-btn-2"},"Close")))))}}]),a}(r.a.Component),N=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"btn-group control grid-1-2","data-toggle":"buttons"},r.a.createElement("button",{className:"btn list-sizing",onClick:this.props.changeListSize,value:"gallery",id:"ls-gallery"},r.a.createElement("input",{type:"radio",name:"options"})),r.a.createElement("button",{className:"btn list-sizing active",onClick:this.props.changeListSize,value:"large",id:"ls-1"},r.a.createElement("input",{type:"radio",name:"options",defaultChecked:!0})),r.a.createElement("button",{className:"btn list-sizing",onClick:this.props.changeListSize,value:"medium",id:"ls-2"},r.a.createElement("input",{type:"radio",name:"options"})),r.a.createElement("button",{className:"btn list-sizing",onClick:this.props.changeListSize,value:"small",id:"ls-3"},r.a.createElement("input",{type:"radio",name:"options"})))}}]),a}(r.a.Component),z=(a(50),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"controls"},r.a.createElement("div",{className:"toggle control grid-1-1"},r.a.createElement("p",{className:"toggle-label"},"Tracks"),r.a.createElement("input",{type:"checkbox",onChange:this.props.toggleItems}),r.a.createElement("p",{className:"toggle-label"},"Artists")),r.a.createElement("select",{className:"spotify-btn-2 control grid-2-1",value:this.props.timeRange,onChange:this.props.changeTimeRange},r.a.createElement("option",{value:"short_term"},"4 Weeks"),r.a.createElement("option",{value:"medium_term"},"6 Months"),r.a.createElement("option",{value:"long_term"},"All Time")),r.a.createElement(k,{itemType:this.props.itemType,timeRange:this.props.timeRange,spotifyApi:this.props.spotifyApi,title:this.props.title}),r.a.createElement(N,{changeListSize:this.props.changeListSize}))}}]),a}(r.a.Component)),T=(a(51),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return this.props.itemType?r.a.createElement("div",{className:"list-group-item ".concat(this.props.listSize)},r.a.createElement("p",{className:"rank ".concat(this.props.listSize)},this.props.itemInfo.rank,"."),r.a.createElement("div",{className:"info-container large"},r.a.createElement("a",{href:this.props.itemInfo.link,target:"_blank",className:"link ".concat(this.props.listSize),rel:"noopener noreferrer"},this.props.itemInfo.name),r.a.createElement("br",null),r.a.createElement("p",{className:"info ".concat(this.props.listSize," genres")},this.props.getGenres(this.props.itemInfo))),r.a.createElement("img",{src:this.props.itemInfo.image,className:"list-image ".concat(this.props.listSize),alt:this.props.itemInfo.name})):r.a.createElement("div",{className:"list-group-item ".concat(this.props.listSize)},r.a.createElement("p",{className:"rank ".concat(this.props.listSize)},this.props.itemInfo.rank,"."),r.a.createElement("div",{className:"info-container large"},r.a.createElement("a",{href:this.props.itemInfo.link,target:"_blank",className:"link ".concat(this.props.listSize),rel:"noopener noreferrer"},this.props.itemInfo.name),r.a.createElement("br",null),r.a.createElement("a",{href:this.props.itemInfo.artistLink,target:"_blank",className:"info ".concat(this.props.listSize),rel:"noopener noreferrer"},this.props.itemInfo.artist)),r.a.createElement("a",{href:this.props.itemInfo.albumLink,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:this.props.itemInfo.artwork,className:"list-image ".concat(this.props.listSize),alt:this.props.itemInfo.album})))}}]),a}(r.a.Component)),C=a(21),w=(a(52),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(C.a,{activeIndex:this.props.galleryIndex,onSelect:this.props.handleSelect,interval:null,indicators:!0},this.props.items.map((function(t,a){return e.props.itemType?r.a.createElement(C.a.Item,{key:a},r.a.createElement("img",{src:t.image,className:"list-image ".concat(e.props.listSize),alt:t.name}),r.a.createElement(C.a.Caption,null,r.a.createElement("p",null,a+1,". "),r.a.createElement("a",{href:t.link,target:"_blank",className:"link ".concat(e.props.listSize),rel:"noopener noreferrer"},t.name),r.a.createElement("br",null),r.a.createElement("p",{className:"info ".concat(e.props.listSize," genres")},e.props.getGenres(t)))):r.a.createElement(C.a.Item,{key:a},r.a.createElement("a",{href:t.albumLink,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:t.artwork,className:"list-image ".concat(e.props.listSize),alt:t.album})),r.a.createElement(C.a.Caption,null,r.a.createElement("p",null,a+1,". "),r.a.createElement("a",{href:t.link,target:"_blank",className:"link ".concat(e.props.listSize),rel:"noopener noreferrer"},t.name),r.a.createElement("br",null),r.a.createElement("a",{href:t.artistLink,target:"_blank",className:"info ".concat(e.props.listSize),rel:"noopener noreferrer"},t.artist)))})))}}]),a}(r.a.Component)),j=(a(53),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getHeader=function(){var e="Your Top ";switch(e+=n.state.itemType?"Artists":"Tracks",n.state.timeRange){case"short_term":return[e,"Last 4 Weeks"];case"medium_term":return[e,"Last 6 Months"];case"long_term":return[e,"All Time"];default:return"error"}},n.getTracks=function(){return n.props.spotifyApi.getMyTopTracks({time_range:n.state.timeRange,limit:"50"}).then((function(e){var t=[];return e.items.forEach((function(e,a){var n={name:e.name,artist:e.artists[0].name,artistLink:e.artists[0].external_urls.spotify,artwork:e.album.images[0].url,album:e.album.name,albumLink:e.album.external_urls.spotify,link:e.external_urls.spotify,rank:a+1};t.push(n)})),t}))},n.getArtists=function(){return n.props.spotifyApi.getMyTopArtists({time_range:n.state.timeRange,limit:"50"}).then((function(e){var t=[];return e.items.forEach((function(e,a){var n={name:e.name,image:e.images[0].url,link:e.external_urls.spotify,genres:e.genres.slice(0,3),rank:a+1};t.push(n)})),t}))},n.toggleItems=function(){var e=!n.state.itemType;e?n.getArtists().then((function(t){n.setState({itemType:e,items:t,galleryIndex:0})})):n.getTracks().then((function(t){n.setState({itemType:e,items:t,galleryIndex:0})}))},n.changeTimeRange=function(){var e=Object(E.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({timeRange:t.target.value});case 2:n.state.itemType?n.getArtists().then((function(e){n.setState({items:e,galleryIndex:0})})):n.getTracks().then((function(e){n.setState({items:e,galleryIndex:0})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.changeListSize=function(e){var t=e.target.value;"gallery"!==t&&Array.from(document.getElementsByClassName(n.state.listSize)).forEach((function(e){e.classList.replace(n.state.listSize,t)})),n.setState({listSize:t})},n.handleSelect=function(e,t){n.setState({galleryIndex:e})},n.getGenres=function(e){var t=Object(g.a)(e.genres),a="";if(t.length>0){a+=t[0].replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}));var n,r=Object(f.a)(t.slice(1));try{for(r.s();!(n=r.n()).done;){var s=n.value;a+=", ".concat(s.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})))}}catch(i){r.e(i)}finally{r.f()}}return a},n.state={itemType:!1,items:[],timeRange:"short_term",listSize:"large",galleryIndex:0},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getTracks().then((function(t){return e.setState({items:t})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("h1",null,this.getHeader()[0]),r.a.createElement("h2",null,this.getHeader()[1])),r.a.createElement(z,{itemType:this.state.itemType,timeRange:this.state.timeRange,listSize:this.state.listSize,toggleItems:this.toggleItems,changeTimeRange:this.changeTimeRange,changeListSize:this.changeListSize,spotifyApi:this.props.spotifyApi,title:this.getHeader()}),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"container list-group"},"gallery"===this.state.listSize&&r.a.createElement(w,{items:this.state.items,itemType:this.state.itemType,listSize:this.state.listSize,galleryIndex:this.state.galleryIndex,handleSelect:this.handleSelect,getGenres:this.getGenres}),"gallery"!==this.state.listSize&&this.state.items.map((function(t,a){return r.a.createElement(T,{itemType:e.state.itemType,listSize:e.state.listSize,getGenres:e.getGenres,itemInfo:t,key:a})})))))}}]),a}(r.a.Component)),I=(a(54),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);var n=(e=t.call(this)).getHashParams().access_token;return e.state={loggedIn:!!n,spotifyApi:new u.a},n&&e.state.spotifyApi.setAccessToken(n),e}return Object(o.a)(a,[{key:"getHashParams",value:function(){for(var e,t={},a=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);e=a.exec(n);)t[e[1]]=decodeURIComponent(e[2]);return t}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},!this.state.loggedIn&&r.a.createElement(h,null),this.state.loggedIn&&r.a.createElement(j,{spotifyApi:this.state.spotifyApi}))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.85a34344.chunk.js.map